language: java
sudo: false

jdk:
- oraclejdk8

env:
  global:
  - secure: "xYQjQqJkLcj9krT35oub2Z2Y5PQlpWIz6LGt84P6nx4s/o6q0T0GUWWi+JxiHkVd/0AWtk5DjSEDPqct4IqhlElWa6FETqC20ZbVXNMD2I2E+V1EVO0Pkp/udIUqTx/I3uHp40ESasYr3pMGQs1tfTCARimu3xbIP/3bkXcFNYCPbuG43AtxKwrzFrxce0FZLmzK1nhOau2x2FijdLHYgmO7yiSYR6iNcgmU4x65z1KmjqYXNinHxpCTE1Uk1r93K1Q9ugXGI4s8lM4Iy7QLriCTnyIVRCVBWQ/xUWw29QlGlGh31hCYiFli3N8W4S7+p9ivJyZ3PTjImu+uLtAViKQCpEZZfUP3UcxaD1RMhA8Cyk1ALz4dV2HMgxuuHo2xKyajdwuQAX4QckVEavCEDZ5B/ZhzbjDxHLVvKGYc1Se6RcQL0xG/r7ui2dHp18E/8TpItWccHQpfPfe1yL0s9hRdkwN9QpAe3Xpns7YK1R3A/7Wnm8ScQ4q8/60VVD2q260fKFZU3a+7yFInTKGX4jSY+U/Iy4pFQ2N71sUHjKXXsY/tJUd9HpRO6vOUXY4TuGt3nz8cXvPAR9z7LgSYwnC2n1K786urpntJ+0mXmkpxZo83e5zwLZk5s2U69zs00J2m0Gs9SKLxN5b7QKVddrr8SjxD+D+UgCj8ZaBPDCc="
  - secure: "RpFtrVxa6VgBrg08rd+2VEVUyPMAE1Dy1y8ASsxSrR4PS8jA5Hvl+C7xv9djsejfda+7KNK3+TsrUBIl5cLgrB3mGYk4oyQfx+a0hQuXK7tLfHHjf4Pk38RvEwWR92IUndx37Wxi827WB5vmEKVxDC++tKN5jWgcZLd+tQRF4ZzQWnldheIq9pwsryWdoUT5isNa4EHc0m0bNlgV+1y5N2ZGvA/MKGmpZjB7vyW0nNcfSxE9ajt5Ey9heY17iBpRDJ0TzwyaP0PzQis4ZriXF7fAzfrq1ltCDe2XxrohHVnOSMflLoUTXUJXMCO8frORngHqKIp2WMmtHII4f9pJm3ja6x6sMHqLAQkt9yUkmdxJX568GJKj2FeyUkbf+i5CmjtzI17dKv6vh/htBhR+b9YHK8u6mc4C6HtcUxIv5rSmtf15jF1rRkvHjZE0vZNi2/adCsNRU3N7JPOLckrCyRuvE+cpyX79Vn7nXkR9nBurXPXAG8lAkdHmeRi3vsZDQBVGYdnPlqCrVuGIAhSb6rdLBq1y+jW7TLoCw6wYvJhNa8QqGqJhGXzSqkFG5RMwIrQirNIjr8av/hEeY1bAFUkwCYyB3dzweIxOghn6CUVNOsVRnVQDfcq3UjG/64mZ1hGiBqvla5VWyAvfqgUpI0093PqupMsOqklbThiauzg="
  matrix:
  - TERM=dumb

before_install:
- cp gradle.properties.ci gradle.properties

script:
- JAVA_OPTS="-Xmx384m -XX:+UseG1GC -XX:SoftRefLRUPolicyMSPerMB=0 -noverify" ./gradlew check

after_success:
- "./gradlew coveralls"
- "./gradlew uploadArchives"

matrix:
  fast_finish: true

cache:
  directories:
  - "$HOME/.gradle"
